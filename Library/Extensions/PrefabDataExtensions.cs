using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using UnityEngine.Events;

namespace Library.Extensions
{
    internal static class PrefabDataExtensions
    {
        private static Random _rnd = new Random();

        private const string _jsons = "[2230162530,1700590233,749308997,1799741974,152398164,2144238755,1378621008,947646353,502341109,1268553078,34236153,2413004657,3226071152,4242992691,4226591773,4111973013,4094102585,184980835,7998121,1746777970,3552157237,4026062825,4048370658,1775505989,2415486076,2688076533,2853031701,1027662705,3408144370,3536315470,2796827395,3899244415,61736494,2544802907,323267652,696742392,744964644,2237837448,2478940882,1858217462,2998578701,2774275652,3408002736,1862420473,619264397,2486800063,2678767843,3071563544,3903362521,1428457674,244382885,3173379894,1251165925,3000280940,3950246854,4102731676,3217429507,781838418,1716199441,4131904318,765798322,506215165,3590920894,1510201832,2789666127,178719473,3143506515,922765448,3009986025,2291464081,1140854216,3478105708,2913715266,3843853141,2997114422,694658441,1654744457,22434726,1714545561,276720697,2389956165,1502152781,1049750369,2499231611,833428709,3571862586,1311846197,1314849795,1737870479,2749405185,3677777210,2628005754,3919686896,2107058515,2972237931,2422310333,4060169083,3406326145,2864014888,1841596500,4224395968,2179325520,3622071578,3165678508,1216081662,3250880722,2700861605,447548514,1886694238,1961464529,310235277,3531096400,919059809,2326657495,803699375,2194854973,3895720527,623529040,3234260181,72949757,995542180,372561515,2925153068,916411076,870964632,3142585907,4226933713,988575920,2420963995,666723058,2445531270,2287692505,2885306130,2628293590,2495455735,2992622722,4007143608,2020882686,3604214018,3806670866,39145797,1328725971,394317603,1863447460,3492511753,2517163973,2985131153,2617197084,1366890262,2573045084,1554352183,416016990,4154096236,691733698,2588143692,3632735569,4052050086,22371514,655928230,1784552402,2979925346,4192425004,2757098325,2275529615,3639337741,450693198,3681316424,681356175,2623494141,981502669,1693470424,884069569,2972826437,3163039755,94965251,723300401,4292112595,2753214455,2138739139,1907500437]";

        public static List<uint> Entitys = new List<uint>();

        static PrefabDataExtensions()
        {
            Entitys = JsonConvert.DeserializeObject<List<uint>>(_jsons);
        }

        public static bool IsEntity(this PrefabData entityID) => Entitys.Contains(entityID.id);

        public static List<T> ShufflePrefabs<T>(this List<T> source)
        {
            for (int i = source.Count - 1; i > 0; i--)
            {
                int k = _rnd.Next(i + 1);
                T value = source[k];
                source[k] = source[i];
                source[i] = value;
            }

            return source;
        }
    }
}
